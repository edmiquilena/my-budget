{"version":3,"file":"User.js","names":["SALT_WORK_FACTOR","User","sequelize","password","bcrypt","genSalt","salt","hash","compare","Model","init","id","type","DataTypes","UUID","defaultValue","UUIDV4","primaryKey","email","STRING","isEmail","modelName","beforeCreate","user","options","then","err","Error","sync","console","log"],"sources":["../../src/models/User.js"],"sourcesContent":["import bcrypt from \"bcrypt\"\nimport {Model, DataTypes}  from 'sequelize'\nconst SALT_WORK_FACTOR = 10;\nconst User = async(sequelize) => {  class User extends Model {\n    async generateHash(password) {\n        const salt = await bcrypt.genSalt(SALT_WORK_FACTOR);\n        return bcrypt.hash(password, salt);\n    }\n    async validPassword(password) {\n        return await bcrypt.compare(password, this.password);\n    }\n\n}\n  User.init(\n    {\n    id: { \n      type: DataTypes.UUID, \n      defaultValue: DataTypes.UUIDV4,\n    primaryKey: true},\n    email: {type: DataTypes.STRING, isEmail: true},\n        password: DataTypes.STRING\n    },\n    {\n      sequelize,\n      modelName: 'User',\n     \n    }\n  );\n  User.beforeCreate((user, options) => {\n\n    return bcrypt.hash(user.password, 10)\n        .then(hash => {\n            user.password = hash;\n        })\n        .catch(err => { \n            throw new Error(); \n        });\n});\n  try{ \n  await User.sync()\n  } catch(e) {\n    console.log(e)\n  }\n  return User;\n  }\nexport default User;\n\n"],"mappings":";;;;;;;;;AAAA;;AACA;;;;+CAAA,oJ,CAAA,oJ;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAMA,gBAAgB,GAAG,EAAzB;;AACA,IAAMC,IAAI;EAAA,sEAAG,kBAAMC,SAAN;IAAA;IAAA;MAAA;QAAA;UAAA;YAA6BD,IAA7B;cAAA;;cAAA;;cAAA;gBAAA;;gBAAA;cAAA;;cAAA;gBAAA;gBAAA;kBAAA,+EACT,iBAAmBE,QAAnB;oBAAA;oBAAA;sBAAA;wBAAA;0BAAA;4BAAA;4BAAA,OACuBC,kBAAA,CAAOC,OAAP,CAAeL,gBAAf,CADvB;;0BAAA;4BACUM,IADV;4BAAA,iCAEWF,kBAAA,CAAOG,IAAP,CAAYJ,QAAZ,EAAsBG,IAAtB,CAFX;;0BAAA;0BAAA;4BAAA;wBAAA;sBAAA;oBAAA;kBAAA,CADS;;kBAAA;oBAAA;kBAAA;;kBAAA;gBAAA;cAAA;gBAAA;gBAAA;kBAAA,gFAKT,kBAAoBH,QAApB;oBAAA;sBAAA;wBAAA;0BAAA;4BAAA;4BAAA,OACiBC,kBAAA,CAAOI,OAAP,CAAeL,QAAf,EAAyB,KAAKA,QAA9B,CADjB;;0BAAA;4BAAA;;0BAAA;0BAAA;4BAAA;wBAAA;sBAAA;oBAAA;kBAAA,CALS;;kBAAA;oBAAA;kBAAA;;kBAAA;gBAAA;cAAA;;cAAA;YAAA,EAA0CM,gBAA1C;;YAUXR,IAAI,CAACS,IAAL,CACE;cACAC,EAAE,EAAE;gBACFC,IAAI,EAAEC,oBAAA,CAAUC,IADd;gBAEFC,YAAY,EAAEF,oBAAA,CAAUG,MAFtB;gBAGJC,UAAU,EAAE;cAHR,CADJ;cAKAC,KAAK,EAAE;gBAACN,IAAI,EAAEC,oBAAA,CAAUM,MAAjB;gBAAyBC,OAAO,EAAE;cAAlC,CALP;cAMIjB,QAAQ,EAAEU,oBAAA,CAAUM;YANxB,CADF,EASE;cACEjB,SAAS,EAATA,SADF;cAEEmB,SAAS,EAAE;YAFb,CATF;YAeApB,IAAI,CAACqB,YAAL,CAAkB,UAACC,IAAD,EAAOC,OAAP,EAAmB;cAEnC,OAAOpB,kBAAA,CAAOG,IAAP,CAAYgB,IAAI,CAACpB,QAAjB,EAA2B,EAA3B,EACFsB,IADE,CACG,UAAAlB,IAAI,EAAI;gBACVgB,IAAI,CAACpB,QAAL,GAAgBI,IAAhB;cACH,CAHE,WAII,UAAAmB,GAAG,EAAI;gBACV,MAAM,IAAIC,KAAJ,EAAN;cACH,CANE,CAAP;YAOH,CATC;YAzBW;YAAA;YAAA,OAoCL1B,IAAI,CAAC2B,IAAL,EApCK;;UAAA;YAAA;YAAA;;UAAA;YAAA;YAAA;YAsCTC,OAAO,CAACC,GAAR;;UAtCS;YAAA,kCAwCJ7B,IAxCI;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAH;;EAAA;IAAA;EAAA;AAAA,GAAV;;eA0CeA,I"}